{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\Maria Elena\\\\Desktop\\\\Programaci\\xF3n\\\\Bluuweb\\\\Next\\\\ontime\\\\components\\\\crud\\\\main\\\\index.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Axios from 'axios'; // import API from 'api';\n\nimport './styles.module.css';\nimport Mdl from '../features/modal';\nvar URL = 'https://jsonplaceholder.typicode.com/';\n\nvar StudentPortal = /*#__PURE__*/function (_React$Component) {\n  _inherits(StudentPortal, _React$Component);\n\n  var _super = _createSuper(StudentPortal);\n\n  function StudentPortal() {\n    var _this;\n\n    _classCallCheck(this, StudentPortal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      post: [],\n      title: \"\",\n      body: \"\",\n      isModalOpen: false,\n      editable: false,\n      editablePost: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"createPost\", function (e) {\n      e.preventDefault();\n      var _this$state = _this.state,\n          title = _this$state.title,\n          body = _this$state.body,\n          post = _this$state.post;\n\n      if (_this.state.editable) {\n        var _post = _this.state.post;\n\n        var postt = _post.find(function (post) {\n          return post.id === _this.state.editablePost;\n        });\n\n        postt.title = title;\n        postt.body = body;\n\n        _this.setState({\n          postt: postt,\n          title: \"\",\n          body: \"\",\n          editable: false,\n          editablePost: null,\n          isModalOpen: false\n        });\n      } else {\n        Axios.post(URL + \"posts\", {\n          title: title,\n          body: body\n        }).then(function (res) {\n          if (res.status == 201) {\n            console.log(res);\n            var posts = [].concat(_toConsumableArray(post), [{\n              userId: post[post.length - 1].id + 1,\n              id: post[post.length - 1].id + 1,\n              title: title,\n              body: body\n            }]);\n\n            _this.setState({\n              post: posts,\n              title: \"\",\n              body: \"\",\n              isModalOpen: false\n            });\n          }\n        })[\"catch\"](function (error) {\n          console.log(error);\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"editHandler\", function () {\n      _this.setState({\n        isModalOpen: !_this.state.isModalOpen\n      }); // const {students} = this.state;\n      // const student = students.find(student => student.id === id);\n      // student.name = name;\n      // student.dept = dept;\n      // this.setState({students}); \n\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleDelete\", function (id) {\n      Axios[\"delete\"](URL + \"posts/\" + id).then(function (res) {\n        if (res.status == 200) {\n          var post = _this.state.post.filter(function (post) {\n            return post.id != id;\n          });\n\n          _this.setState({\n            post: post\n          });\n        }\n\n        console.log(res);\n      })[\"catch\"](function (e) {\n        return console.log(e);\n      }); // Axios.delete('https://jsonplaceholder.typicode.com/posts/1', {\n      //     method: 'DELETE'\n      // }).then(res => console.log(res))\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"changeHandler\", function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"modalHandler\", function (isSubmitable, id) {\n      // if isSubmitable == 1 then Submitable\n      // if isSubmitable == 2 then Editable\n      if (isSubmitable == 2) {\n        var post = _this.state.post;\n        var postt = post.find(function (post) {\n          return post.id === id;\n        });\n\n        _this.setState({\n          isModalOpen: !_this.state.isModalOpen,\n          editable: true,\n          editablePost: id,\n          title: postt.title,\n          body: postt.body\n        });\n      } else {\n        _this.setState({\n          isModalOpen: !_this.state.isModalOpen,\n          editable: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"modalCloseHandler\", function () {\n      _this.setState({\n        isModalOpen: !_this.state.isModalOpen,\n        editable: false,\n        editablePost: null,\n        title: \"\",\n        body: \"\"\n      });\n    });\n\n    return _this;\n  }\n\n  _createClass(StudentPortal, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Axios.get(URL + \"posts\").then(function (res) {\n        return _this2.setState({\n          post: res.data\n        });\n      })[\"catch\"](function (e) {\n        return console.log(e);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      console.log(this.state);\n      return (// <div>\n        //     <h3>Online posts</h3>\n        //     <ul>\n        //         {this.state.student.map(({title,id}) => <li key={id}>{title}</li>)}\n        //     </ul>\n        // </div>\n        __jsx(\"div\", {\n          className: \"main_portal\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }\n        }, __jsx(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 17\n          }\n        }, __jsx(\"div\", {\n          className: \"col-lg-12 viw\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 21\n          }\n        }, __jsx(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }\n        }, __jsx(\"button\", {\n          className: \"btn btn-sm btn-info\",\n          onClick: function onClick() {\n            return _this3.modalHandler(1);\n          },\n          style: {\n            position: \"fixed\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 25\n          }\n        }, \"Add Post\")), __jsx(Mdl, {\n          isOpen: this.state.isModalOpen,\n          close: this.modalCloseHandler,\n          handleSubmit: this.createPost,\n          changeHandler: this.changeHandler,\n          title: this.state.title,\n          body: this.state.body,\n          editable: this.state.editable,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 25\n          }\n        }), __jsx(\"div\", {\n          className: \"container grid_view\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }\n        }, __jsx(\"h3\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165,\n            columnNumber: 29\n          }\n        }, \"Grid View\"), __jsx(\"div\", {\n          className: \"row\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 29\n          }\n        }, this.state.post.map(function (_ref, indx) {\n          var id = _ref.id,\n              title = _ref.title,\n              body = _ref.body;\n          return __jsx(\"div\", {\n            className: \"col-sm-4\",\n            key: id,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 33\n            }\n          }, __jsx(\"div\", {\n            className: \"item list-group-item-\".concat(indx % 2 === 0 ? \"info\" : \"success\"),\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 37\n            }\n          }, __jsx(\"h6\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 171,\n              columnNumber: 41\n            }\n          }, id), __jsx(\"h5\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 41\n            }\n          }, title), __jsx(\"p\", {\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 41\n            }\n          }, body), __jsx(\"button\", {\n            className: \"btn btn-sm btn-success mr-2\",\n            onClick: function onClick() {\n              return _this3.modalHandler(2, id);\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 41\n            }\n          }, \"Edit\"), __jsx(\"button\", {\n            className: \"btn btn-sm btn-danger\",\n            onClick: function onClick() {\n              return _this3.handleDelete(id);\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 41\n            }\n          }, \"delete\")));\n        }))))))\n      );\n    }\n  }]);\n\n  return StudentPortal;\n}(React.Component);\n\nexport default StudentPortal;","map":{"version":3,"sources":["C:/Users/Maria Elena/Desktop/Programación/Bluuweb/Next/ontime/components/crud/main/index.js"],"names":["React","Axios","Mdl","URL","StudentPortal","post","title","body","isModalOpen","editable","editablePost","e","preventDefault","state","postt","find","id","setState","then","res","status","console","log","posts","userId","length","error","filter","target","name","value","isSubmitable","get","data","modalHandler","position","modalCloseHandler","createPost","changeHandler","map","indx","handleDelete","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Axios from 'axios'\r\n// import API from 'api';\r\nimport './styles.module.css'\r\n\r\nimport Mdl from '../features/modal'\r\n\r\nconst URL = 'https://jsonplaceholder.typicode.com/'\r\n\r\n\r\nclass StudentPortal extends React.Component { \r\n    state = {\r\n        post: [],\r\n        title: \"\",\r\n        body: \"\",\r\n        isModalOpen: false,\r\n        editable: false,\r\n        editablePost: null\r\n    }\r\n\r\n    componentDidMount(){\r\n        \r\n        Axios.get(URL+\"posts\")\r\n                .then(res => this.setState({post: res.data}))\r\n                .catch(e => console.log(e))\r\n                \r\n        \r\n\r\n    }\r\n\r\n    createPost = e => {\r\n        e.preventDefault();\r\n        const {title,body,post} = this.state;\r\n\r\n        if(this.state.editable){\r\n\r\n            const {post} = this.state;\r\n            const postt = post.find(post => post.id === this.state.editablePost);\r\n            postt.title = title;\r\n            postt.body = body;\r\n            this.setState({postt,title:\"\",body:\"\",editable:false,editablePost:null,isModalOpen:false}); \r\n\r\n        }else{\r\n            \r\n                \r\n        \r\n                Axios.post(URL+\"posts\",\r\n                        {\r\n                        title: title,\r\n                        body: body\r\n                    })\r\n                  .then(res => {\r\n                      if(res.status == 201){\r\n                        console.log(res);\r\n        \r\n                        const posts = [...post, {\r\n                            userId: post[post.length - 1].id + 1,\r\n                            id: post[post.length - 1].id + 1,\r\n                            title: title,\r\n                            body: body\r\n                        }];\r\n                        this.setState({post: posts, title:\"\",body:\"\",isModalOpen:false});\r\n                        \r\n                      }\r\n                    \r\n                  })\r\n                  .catch(function (error) {\r\n                    console.log(error);\r\n                  });\r\n        }\r\n\r\n    }\r\n\r\n    editHandler = () => {\r\n        this.setState({isModalOpen: !this.state.isModalOpen})\r\n\r\n\r\n        // const {students} = this.state;\r\n        // const student = students.find(student => student.id === id);\r\n        // student.name = name;\r\n        // student.dept = dept;\r\n        // this.setState({students}); \r\n    }\r\n\r\n    handleDelete = id => {\r\n\r\n        Axios.delete(URL+\"posts/\"+id)\r\n            .then(res => {\r\n                if(res.status == 200){\r\n                    const post = this.state.post.filter(post => post.id != id);\r\n                    this.setState({post});\r\n                }\r\n            console.log(res);\r\n        }).catch(e => console.log(e));\r\n\r\n        // Axios.delete('https://jsonplaceholder.typicode.com/posts/1', {\r\n        //     method: 'DELETE'\r\n        // }).then(res => console.log(res))\r\n\r\n\r\n\r\n    }\r\n\r\n    changeHandler = e => {\r\n        this.setState({\r\n            [e.target.name] : e.target.value\r\n        })\r\n    }\r\n\r\n    modalHandler = (isSubmitable,id) => {\r\n        // if isSubmitable == 1 then Submitable\r\n        // if isSubmitable == 2 then Editable\r\n        if(isSubmitable == 2){\r\n            const {post} = this.state;\r\n            const postt = post.find(post => post.id === id);\r\n            \r\n\r\n\r\n            this.setState({isModalOpen: !this.state.isModalOpen,editable:true,editablePost:id,title:postt.title,body:postt.body})\r\n        }else{\r\n            this.setState({isModalOpen: !this.state.isModalOpen,editable:false})\r\n        }\r\n    }\r\n    modalCloseHandler = () => {\r\n        this.setState({isModalOpen: !this.state.isModalOpen,editable:false,editablePost:null,title:\"\",body:\"\"}) \r\n    }\r\n\r\n    render(){\r\n        console.log(this.state)\r\n       \r\n        return (\r\n            // <div>\r\n            //     <h3>Online posts</h3>\r\n            //     <ul>\r\n            //         {this.state.student.map(({title,id}) => <li key={id}>{title}</li>)}\r\n            //     </ul>\r\n            // </div>\r\n\r\n            <div className=\"main_portal\">\r\n                \r\n                <div className=\"row\">\r\n                    <div className=\"col-lg-12 viw\">\r\n                        <div>\r\n                        <button  className=\"btn btn-sm btn-info\" onClick={() => this.modalHandler(1)}\r\n                        style={{position: \"fixed\"}}>Add Post</button>\r\n                        </div>\r\n                        {/* <div className=\"d-flex justify-content-end\">\r\n                        <button onClick={() => handleViewChange(\"1\")} className={`btn btn-${viewStatus === \"1\" ? \"success\" : \"info\"} mr-2`}>List View</button>\r\n                        <button onClick={() => handleViewChange(\"2\")} className={`btn btn-${viewStatus === \"2\" ? \"success\" : \"info\"} mr-2`}>Grid View</button>\r\n                        <button onClick={() => handleViewChange(\"3\")} className={`btn btn-${viewStatus === \"3\" ? \"success\" : \"info\"} mr-2`}>Table View</button>\r\n                        </div> */}\r\n                        <Mdl \r\n                            isOpen={this.state.isModalOpen}\r\n                            close={this.modalCloseHandler}\r\n                            handleSubmit={this.createPost}\r\n                            changeHandler={this.changeHandler}\r\n                            title={this.state.title}\r\n                            body={this.state.body}\r\n                            editable={this.state.editable}\r\n                        />\r\n\r\n\r\n                        \r\n                        <div className=\"container grid_view\">\r\n                            <h3>Grid View</h3>\r\n                            <div className=\"row\">\r\n                        \r\n                                {this.state.post.map(({id,title,body},indx) =>\r\n                                <div className=\"col-sm-4\" key={id}>\r\n                                    <div className={`item list-group-item-${indx%2===0?\"info\":\"success\"}`}>\r\n                                        <h6>{id}</h6>\r\n                                        <h5>{title}</h5>\r\n                                        <p>{body}</p>\r\n                                        <button  className=\"btn btn-sm btn-success mr-2\" onClick={() => this.modalHandler(2,id)}>Edit</button>\r\n                                        <button  className=\"btn btn-sm btn-danger\" onClick={() => this.handleDelete(id)}>delete</button>\r\n                                    </div>\r\n                                </div>\r\n                                )}\r\n                        \r\n                            </div>\r\n                        </div>\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default StudentPortal;"]},"metadata":{},"sourceType":"module"}